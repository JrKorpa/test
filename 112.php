<?php
/**
 * @Author: anchen
 * @Date:   2017-07-26 16:27:47
 * @Last Modified by:   anchen
 * @Last Modified time: 2017-08-31 17:54:21
 */
$localhost = '192.168.10.23';
$db_user   = 'root';
$db_pass   = '1308b8dac1e577';

$localhost = '192.168.0.95';
$db_user   = 'cuteman';
$db_pass   = 'QW@W#RSS33#E#';

//创建对象并打开连接，最后一个参数是选择的数据库名称 
$mysqli = new mysqli($localhost, $db_user ,$db_pass, 'test'); 
//检查连接是否成功 
if (mysqli_connect_errno()){ 
    //注意mysqli_connect_error()新特性 
    die('Unable to connect!'). mysqli_connect_error(); 
}

//$sql = "select * from `base_style_info` `s` inner join `list_style_goods` `x` on `s`.`style_sn` = `x`.`style_sn` where `s`.`check_status` = 3 and `s`.style_sn in(select goods_sn from style_sn_now)";
//$result = $mysqli->query($sql);
//$style_data = array();
//$style_data = con($result);

function con($arr)
{
    $data_info = array();
    while($row = $arr->fetch_array(MYSQLI_ASSOC)){

        $data_info[] = $row;
    }

    return $data_info;
}

$sql = "select * from user_warehouse";
$result = $mysqli->query($sql);
$style_data = array();
$style_data = con($result);
$r = array();
foreach ($style_data as $k => $v) {
    # code...
    $r[$v['user_id']][] = $v['house_id'];
};
$data = array(13258,
13290,
13330,
13399,
13402,
13438,
13462,
13475,
13480,
13490,
13491,
13517,
13522,
13526,
13539,
13548,
13549,
13550,
13595,
13605,
13606,
13666,
13710,
13734,
13748,
13755,
13758,
13767,
13789,
13833,
13868,
14028,
14051,
14083,
14086,
14126,
14150,
14161,
14176,
14186,
14213,
14224,
14268,
14340,
14402,
14428,
14469,
14590,
14849,
14851,
14884,
14888,
14892,
14894,
14898,
14899,
14903,
14910,
14914,
14918,
14924,
14929,
14930,
14942,
14949,
14950,
14951,
14956,
14960,
14967,
14978,
14979,
14982,
15008,
15015,
15016,
15018,
15025,
15026,
15028,
15035,
15036,
15046,
15050,
15056,
15059,
15065,
15073,
15074,
15075,
15082,
15084,
15086,
15090,
15091,
15094,
15099,
15100,
15101,
15102,
15107,
15108,
15113,
15114,
15118,
15125,
15126,
15127,
15128,
15131,
15133,
15136,
15141,
15142,
15146,
15148,
15150,
15151,
15155,
15156,
15157,
15162,
15165,
15171,
15177,
15178,
15179,
15180,
15181,
15182,
15183,
15188,
15189,
15190,
15198,
15199,
15201,
15216,
15220,
15230,
15234,
15246,
15249,
15250,
15253,
15257,
15258,
15259,
15261,
15268,
15270,
15276,
15277,
15283,
15285,
15292,
15293,
15294,
15295,
15301,
15302,
15308,
15309,
15310,
15311,
15326,
15327,
15330,
15332,
15333,
15340,
15348,
15349,
15353,
15354,
15361,
15369,
15370,
15374,
15375,
15397,
15398,
15409,
15415,
15419,
15420,
15422,
15424,
15425,
15426,
15428,
15429,
15430,
15440,
15467,
15468,
15469,
15470,
15476,
15478,
15480,
15481,
15482,
15497,
15498,
15516,
15521,
15527,
15528,
15529,
15530,
15531,
15532,
15533,
15539,
15540,
15541,
15548,
15559,
15582,
15588,
15592,
15600,
15644,
15645,
15652,
15658,
15659,
15660,
15661,
15670,
15674,
15679,
15687,
15702,
15703,
15704,
15705,
15727,
15728,
15729,
15730,
15731,
15742,
15744,
15751,
15755,
15760,
15767,
15768,
15778,
15785,
15786,
15787,
15798,
15805,
15807,
15808,
15814,
15815,
15816,
15825,
15827,
15834,
15835,
15836,
15837,
15838,
15839,
15845,
15849,
15850,
15853,
15854,
15855,
15856,
15857,
15858,
15859,
15873,
15874,
15882,
15883,
15885,
15891);

$afdf = array(13868,
14213,
14884,
14888,
14889,
15529,
15531,
15533,
15540,
15582,
15702,
15703,
15729,
15747,
15767,
15768,
15786,
15805,
15845,
15882,
15883,
15885,
15891);

foreach ($data as $key => $user_id) {
    if(in_array($user_id, $afdf)) continue;
    $cout = isset($r[$user_id]) && !empty($r[$user_id])?$r[$user_id]:array();
    if(empty($cout)){
        continue;
    } 
    $a[] =$user_id; 
    //var_dump($cout);die;
    foreach ($cout as $k => $v) {
        $sql = "INSERT INTO `cuteframe`.`user_extend_view_button` (`id`, `user_id`, `type`, `source_id`, `permission_id`, `parent_id`) VALUES (null, '$user_id', '2', '$v', '2995', '2055')";
        echo $sql.";<br/>";
    }
}
//echo count($a);